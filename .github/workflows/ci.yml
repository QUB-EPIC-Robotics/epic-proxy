name: CI

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events
  push:
  pull_request:

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Print current file states
      run: |
        echo Listing /etc/environment...
        ls -lah /etc/environment
        cat /etc/environment
        echo Listing /etc/ssh/ssh_config.d/...
        ls -lah /etc/ssh/ssh_config.d
        echo Listing /etc/systemd/timesyncd.conf...
        ls -lah /etc/systemd/timesyncd.conf
        cat /etc/systemd/timesyncd.conf
      continue-on-error: true

    - name: Global environment
      run: sudo bash -x ./tests/run-tests.sh

